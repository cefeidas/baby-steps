<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Catalog</h1>
    <h2>Books</h2>
        <form method="get">
            <label for="query">Search:</label>
            <input type="text" id="query" name="query" required>
            <select name="field">
                <option value="title">Title</option>
                <option value="writer">Writer</option>
                <option value="genre">Genre</option>
                <option value="editorial">Editorial</option>
                <option value="isbn">ISBN</option>
            </select>
            <input type="submit" value="Search">
        </form>
        <table>
            {% for book in books %}
            <tr>
                <td>
                    <button class="toggle-details" onclick="toggleDetails({{ forloop.counter0 }})"> {{ book.title }} </button>
                    <table id="details-{{ forloop.counter0 }}" style="display:none">
                        <tr><td>Description:</td><td>{{ book.description }}</td></tr>
                        <tr><td>Genre:</td><td>{{ book.get_genre_display }}</td></tr>
                        <tr><td>Pages:</td><td>{{ book.num_pages }}</td></tr>
                        <tr><td>Editorial:</td><td>{{ book.editorial }}</td></tr>
                        <tr><td>ISBN:</td><td>{{ book.isbn }}</td></tr>
                        <tr><td>Year:</td><td>{{ book.year_edition }}</td></tr>
                        <tr><td>Date:</td><td>{{ book.date_edition }}</td></tr>
                        <tr><td>Writer:</td><td>{{ book.writer }}</td></tr>
                        <tr><td>Image:</td><td><a href="{{ book.image_url }}" target="_blank">{{ book.image_url }}</a></td></tr>
                    </table>
                </td>
            </tr>
            {% empty %}
            <tr><td>There are no books available.</td></tr>
            {% endfor %}
        </table>

<script>
    function toggleDetails(index) {
        var detailsTable = document.getElementById('details-' + index);
        if (detailsTable.style.display === 'none' || detailsTable.style.display === '') {
            detailsTable.style.display = 'table';
        } else {
            detailsTable.style.display = 'none';
        }
    }
</script>
    <a href="/">Home</a>
</body>
</html>